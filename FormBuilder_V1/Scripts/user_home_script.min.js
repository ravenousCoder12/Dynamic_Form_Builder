function onDrop(n,t){var i='<div class="form-element drop-element bg-light container" id="'+n+'">',r;i+='<div class="row d-flex">';i+='<div class="col">';t!="button"&&(i+='<label for = "'+n+'" class="el-label-outer">'+t+"<\/label>");i+="<\/div>";i+='<div class="col-4 extra-options-onhover" style="display:none;">';i+='<a href="#" class="btn btn-outline-danger btn-sm my-1 remove" id='+n+'><i class="fa-solid fa-xmark"><\/i><\/a>';i+='<a href="#" class="arrow-button up btn btn-sm m-1 btn-outline-info" id="arrow_button_up"><i class="fa-solid fa-arrow-up"><\/i><\/a>';i+='<a href="#" class="arrow-button down btn btn-sm my-1 btn-outline-info" id="arrow_button_down"><i class="fa-solid fa-arrow-down"><\/i><\/a><\/div><\/div>';i+='<div class="form-html">';i+=getPreviewElement(n,t);i+="<\/div>";i+="<\/div>";$("#preview-form").append(i);r="";r+=getEditForm(n,t);$("#element-edit-menu").append(r)}function getPreviewElement(n,t){var i="",r;return t==="text"?(i+=`<label for = `+n+` class="el-label-inner" style="display: none;">`+t+`</label>`,i+=`<input type = "text" id =`+n+` class="ip-text w-100">`):t==="checkbox"?(r=0,i+=`<label for = `+n+` class="el-label-inner" style="display: none;">`+t+`</label>`,i+=`<div id = `+n+` class ="checkbox-group">`,i+='<input type = "checkbox" name ="'+n+'" id = "'+r+'" value="choice1" class="m-1 checkbox-value-'+r+'">',i+='<label for="'+r+'" class="m-1 checkbox-label">choice 1<\/label>',i+="<\/div>"):t==="radio"?(r=0,i+=`<label for = `+n+` class="el-label-inner" style="display: none;">`+t+`</label>`,i+=`<div id = `+n+` class ="radio-group">`,i+='<input type="radio" id='+r+' name="'+n+'"  value="Choice1" class="m-1 radio-value-'+r+'"><label for='+r+' class="radio-label">choice1<\/label> ',i+='<input type="radio" id='+ ++r+' name="'+n+'" value="Choice2" class="m-1 radio-value-'+r+'"><label for='+r+' class="m-1 radio-label" >choice2<\/label>',i+='<input type="radio" id='+ ++r+' name="'+n+'" value="Choice3" class="m-1 radio-value-'+r+'"><label for='+r+' class="m-1 radio-label">choice3<\/label>',i+="<\/div>"):t==="button"&&(i+='<input type="button" id='+n+' value ="button1" class="btn btn-primary btn-ip w-100" name="'+n+' ">'),i}function getEditForm(n,t){var r="",i;return t==="text"?r+=`
            <div id="`+n+`" class="edit-form-div"  style="display: none;">
               
                <form id="`+n+`" class="edit-form">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label for="edit-label" class="control-label col-md-2 text-secondary">Label</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-label" name="edit-label" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-placeholder" class="control-label col-md-2 text-secondary">Placeholder</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-placeholder" name="edit-placeholder" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-value" class="control-label col-md-2 text-secondary">Value</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-value" name="edit-value" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-type" class="control-label col-md-2 text-secondary">Type</label>
                            <div class="col-md-10">
                                <select id="edit-type" name="edit-type" class="form-select-sm w-100">
                                    <option value="text">Text</option>
                                    <option value="password">Password</option>
                                    <option value="email">Email</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-text-color" class="control-label col-md-2 text-secondary w-100">Text Color</label>
                            <div class="col-md-10">
                                <input type="color" id="edit-text-color" name="edit-text-color" class="w-50", autocomplete = "off" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-maxlen" class="control-label col-md-2 text-secondary">MaxLength</label>
                            <div class="col-md-10">
                                <input type="number" id="edit-maxlen" name="edit-maxlen" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>

                    </div>
                </form>
            </div>

            `:t==="checkbox"?(i=0,r+=`
            <div id="`+n+`" class="edit-form-div"  style="display: none;" >
             
                <form id="`+n+`" class="edit-form">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label for="edit-label" class="control-label col-md-2 text-secondary">Label</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-label" name="edit-label" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="text-secondary">Options</label>
                            <div class="col-md-10 w-100">
                                <div class="checkbox-options-div">
                                    <ol class="options-ol text-secondary">
                                        <li id=`+i+`>
                                            <input type="text" value="Option 1" class="option-label", autocomplete = "off">
                                           
                                        </li>
                                        
                                    </ol>
                                </div>
                                <div class="add-option">
                                    <a class="add-op" style = "cursor:pointer;" >Add Option +</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            `):t==="radio"?(i=0,r+=`
            <div id="`+n+`" class="edit-form-div"  style="display: none;">
            
                <form id="`+n+`" class="edit-form">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label for="edit-label" class="control-label col-md-2 text-secondary">Label</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-label" name="edit-label" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="text-secondary">Options</label>
                            <div class="col-md-10 w-100">
                                <div class="radio-options-div">
                                    <ol class="options-ol text-secondary">
                                        <li id=`+i+`>
                                            <input type="text" value="Option 1" class="option-label", autocomplete = "off">
                                            
                                            
                                        </li>
                                        <li id=`+ ++i+`>
                                            <input type="text" value="Option 2" class="option-label", autocomplete = "off">
                                           
                                            
                                        </li>
                                        <li id=`+ ++i+`>
                                            
                                            <input type="text" value="Option 3" class="option-label", autocomplete = "off">
                                            
                                            <a href="#" class="remove-option btn btn-outline-danger border-0 btn-sm" id=`+i+`><i class="fa-solid fa-xmark"></i></a>
                                        </li>
                                    </ol>
                                </div>
                                <div class="add-option">
                                    <a class="add-op" style = "cursor:pointer;">Add Option +</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            `):t==="button"&&(r+=`
            <div id="`+n+`" class="edit-form-div"  style="display: none;">
           
                <form id="`+n+`" class="edit-form">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label for="edit-value" class="control-label col-md-2 text-secondary">Value</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-value" name="edit-value" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-type" class="control-label col-md-2 text-secondary">Type</label>
                            <div class="col-md-10">
                                <select id="edit-type" name="edit-type" class="form-select-sm w-100">
                                    <option value="button">Button</option>
                                    <option value="submit">Submit</option>
                                    
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-name" class="control-label col-md-2 text-secondary">Name</label>
                            <div class="col-md-10">
                                <input type="text" id="edit-name" name="edit-name" class="form-control form-control-sm", autocomplete = "off">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-class" class="control-label col-md-2 text-secondary">Class</label>
                            <div class="col-md-10">
                                <select id="edit-class" name="edit-class" class="form-select-sm w-100">
                                    <option value="btn btn-primary" class = "">Button - Primary</option>
                                    <option value="btn btn-danger">Button - Danger</option>
                                    <option value="btn btn-success">Button - Success</option>
                                    <option value="btn btn-secondary">Button - Secondary</option>
                                    <option value="btn btn-info">Button - Info</option>
                                    <option value="btn btn-warning">Button - Warning</option>
                                    <option value="btn btn-link">Button - Link</option>
                                    <option value="btn btn-dark">Button - Dark</option>
                                    <option value="btn btn-light">Button - Light</option>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            `),r}$(document).ready(function(){$(".form-element").draggable({helper:"clone"});$(".form-element").on("dblclick",function(){var n=$(this).data("type"),t=n+"-"+Date.now();$(".preview-info").hide();onDrop(t,n)});$("#preview-form").droppable({accept:".form-element",drop:function(n,t){var i=t.helper.data("type"),r=i+"-"+Date.now();$(".preview-info").hide();onDrop(r,i)}});$("#preview-form").on("click",".drop-element",function(n){var t=$(this).attr("id");if($(n.target).get(0).tagName=="DIV"&&($("#element-edit-menu").children().hide(),$("#element-edit-menu").children("#"+t).slideToggle()),$("#element-edit-menu").children("#"+t).find("#edit-label").attr("value",$("#"+t+" .el-label-outer").text()),t.substring(0,t.indexOf("-"))==="radio"){$("#element-edit-menu").children("#"+t).on("click",".add-op",function(n){var i,r,u;n.preventDefault();console.log("dwdwdwdwdww");i=parseInt($("#element-edit-menu").children("#"+t).find(".options-ol").children().last().attr("id"))+1;r="";r+=`
                      <li id=`+i+`>                                                                 
                           <input type="text" value="" class="option-label">
                           
                           <a href="#" class="remove-option btn btn-outline-danger border-0 btn-sm" id=`+i+`><i class="fa-solid fa-xmark"></i></a>
                       </li>
                `;$("#element-edit-menu").children("#"+t).find(".options-ol").append(r);u="";u+='<input type="radio" id='+i+' name="'+t+'" value="Choice'+(i+1)+'" class="m-1 radio-value-'+i+'"><label for='+i+' class="radio-label m-1">choice'+(i+1)+" <\/label> ";$("#"+t+" .radio-group").append(u)});$("#element-edit-menu").children("#"+t).on("click",".remove-option",function(n){n.preventDefault();var i=$(this).attr("id");$("#element-edit-menu").children("#"+t).find(".options-ol").children("#"+i).remove();$("#"+t+".radio-group").find("#"+i).remove();$("#"+t+".radio-group").find("label[for="+i+"]").remove()})}if(t.substring(0,t.indexOf("-"))==="checkbox"){$("#element-edit-menu").children("#"+t).on("click",".add-op",function(n){var i,u,r;n.preventDefault();i=parseInt($("#element-edit-menu").children("#"+t).find(".options-ol").children().last().attr("id"))+1;u="";u+=`
                      <li id=`+i+`>                                                                 
                           <input type="text" value="" class="option-label">
                           
                           <a href="#" class="remove-option btn btn-outline-danger border-0 btn-sm" id=`+i+`><i class="fa-solid fa-xmark"></i></a>
                       </li>
                `;$("#element-edit-menu").children("#"+t).find(".options-ol").append(u);r="";r+='<input type = "checkbox" name ="'+t+'" id = "'+i+'" value="choice'+(i+1)+'" class="m-1 checkbox-value-'+i+'">';r+='<label for="'+i+'" class="m-1 checkbox-label">choice'+(i+1)+" <\/label>";$("#"+t+".checkbox-group").append(r)});$("#element-edit-menu").children("#"+t).on("click",".remove-option",function(n){n.preventDefault();var i=$(this).attr("id");$("#element-edit-menu").children("#"+t).find(".options-ol").children("#"+i).remove();$("#"+t+".checkbox-group").find("#"+i).remove();$("#"+t+".checkbox-group").find("label[for="+i+"]").remove()})}t.substring(0,t.indexOf("-"))==="button"&&($("#element-edit-menu").children("#"+t).find("#edit-value").attr("value",$("#"+t+" .btn-ip").attr("value")),$("#element-edit-menu").children("#"+t).find("#edit-name").attr("value",$("#"+t+" .btn-ip").attr("name")))});$("#element-edit-menu").on("input",".edit-form",function(n){var f=$(this).attr("id"),i=f.substring(0,f.indexOf("-")),t;if(i==="text"){var t=$(this).find("#edit-label").val(),o=$(this).find("#edit-placeholder").val(),s=$(this).find("#edit-value").val(),h=$(this).find("#edit-type").val(),e=$(this).find("#edit-maxlen").val();$("#"+$(this).attr("id")+" .el-label-outer").text(t);$("#"+$(this).attr("id")+" .el-label-inner").text(t);$("#"+$(this).attr("id")+" .ip-text").attr("value",s);$("#"+$(this).attr("id")+" .ip-text").attr("type",h);$("#"+$(this).attr("id")+" .ip-text").attr("placeholder",o);$("#"+$(this).attr("id")+" .ip-text").attr("maxlength",e);$(this).find("#edit-value").attr("maxlength",e);$(this).find("#edit-text-color").on("input",function(){var n=$(this).val();$("#"+f+" .ip-text").css("color",n)})}else if(i==="checkbox"){t=$(this).find("#edit-label").val();$("#"+$(this).attr("id")+" .el-label-outer").text(t);$("#"+$(this).attr("id")+" .el-label-inner").text(t);var r=$(n.target).parent().attr("id"),c=n.target.classList,u=n.target.value;$("#"+$(this).attr("id")+" .checkbox-group").find("label[for="+r+"]").text(u);$("#"+$(this).attr("id")+" .checkbox-group").find(".checkbox-value-"+r+"").attr("value",u)}else if(i==="radio"){t=$(this).find("#edit-label").val();$("#"+$(this).attr("id")+" .el-label-outer").text(t);$("#"+$(this).attr("id")+" .el-label-inner").text(t);var r=$(n.target).parent().attr("id"),c=n.target.classList,u=n.target.value;$("#"+$(this).attr("id")+" .radio-group").find("label[for="+r+"]").text(u);$("#"+$(this).attr("id")+" .radio-group").find(".radio-value-"+r+"").attr("value",u)}else i==="button"&&($("#"+$(this).attr("id")+" .btn-ip").attr("value",$(this).find("#edit-value").val()),$("#"+$(this).attr("id")+" .btn-ip").attr("name",$(this).find("#edit-name").val()),$("#"+$(this).attr("id")+" .btn-ip").attr("type",$(this).find("#edit-type").val()),$("#"+$(this).attr("id")+" .btn-ip").removeClass().addClass("btn-ip w-100 "+$(this).find("#edit-class").val()))});$("#preview-form").on("click",".arrow-button.up",function(n){n.preventDefault();var t=$(this).closest(".form-element"),i=t.prev(".form-element");i.length>0&&t.insertBefore(i)});$("#preview-form").on("click",".arrow-button.down",function(n){n.preventDefault();var t=$(this).closest(".form-element"),i=t.next(".form-element");i.length>0&&t.insertAfter(i)});$("#confirmation-dialog").modal({show:!1});$("#preview-form").on("click",".remove",function(){var n=$(this).attr("id");$("#confirmation-dialog").data("elementId",n);$("#confirmation-dialog").data("action","remove");$("#confirmation-dialog .confirmation-message").html("<b>Are you sure you want to remove this Field?<\/b>");$("#confirmation-dialog").modal("show")});$("#clearBtn").on("click",function(){var n=$(".form-html").clone();$.trim(n.html())===""?(toastr.options.timeOut=2e3,toastr.error("No field to clear.")):($("#confirmation-dialog").data("action","clear"),$("#confirmation-dialog .confirmation-message").html("<b>Are you sure you want to clear all Fields?<\/b>"),$("#confirmation-dialog").modal("show"))});$("#confirm-yes").on("click",function(){var t=$("#confirmation-dialog").data("elementId"),n=$("#confirmation-dialog").data("action");n==="remove"?$("div #"+t).remove():n==="clear"&&($("#preview-form").children(".drop-element").remove(),$(".preview-info").show(),$("#element-edit-menu").children(".edit-form-div").empty(),$(".edit-info").show());$("#confirmation-dialog").modal("hide")});$("#close-dialog").on("click",function(){$("#confirmation-dialog").modal("hide")});$("#confirm-no").on("click",function(){$("#confirmation-dialog").modal("hide")});$("#previewBtn").on("click",function(){var t=$(".form-html").clone(),n;$.trim(t.html())===""?(toastr.options.timeOut=2e3,toastr.error("Please drop some fields first.")):(t.find(".el-label-inner").show(),n="",n+='<form><div class="form-horizontal">',n+=$("<div />").append(t).html(),n+="<\/div><\/form>",$("#form-preview-content").empty().append(n),$("#form-preview-content").find(".form-html").attr("class","form-group m-1"),$("#form-preview-content").find(".el-label-inner").removeClass().addClass("control-label col-md-2"),$("#form-preview-content").find(".ip-text").removeClass().addClass("form-control"),$("#form-preview-content").find(".btn-ip").removeClass("btn-ip").addClass("m-1"),$("#previewModal").modal("show"))});$("#form-name").on("input",function(){$("#form-name-validation").empty()});$("#saveFormBtn").on("click",function(){if($("#form-name").val()==="")$("#form-name-validation").text("Required");else{var n={};n.name=$("#form-name").val();n.html=$("#form-preview-content").html();$.ajax({url:"SaveForm",method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8",success:function(){toastr.options.timeOut=2e3;toastr.success("Form saved successfully!");$("#preview-form").empty();$("#form-preview-content").empty();$("#previewModal").modal("hide")},error:function(){alert("Failed to save the form.")}})}});$("#cancelFormbtn").on("click",function(){$("#form-preview-content").empty();$("#form-name-validation").empty();$("#previewModal").modal("hide")});$("#previewModal").on("hidden.bs.modal",function(){$("#form-preview-content").empty();$("#form-name-validation").empty()});$("#close-preview-form").on("click",function(){$("#form-preview-content").empty();$("#form-name-validation").empty();$("#previewModal").modal("hide")});$("#preview-form").on("mouseenter",".drop-element",function(){$(this).find(".extra-options-onhover").show()});$("#preview-form").on("mouseleave",".drop-element",function(){$(this).find(".extra-options-onhover").hide()})});